<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Details</title>
    <style>
        html {
            font-family: Arial, serif;
            background-color: #FFFFFF;
        }
    </style>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
    <h1>Details View</h1>
    <h2>Your Ã˜ Level</h2>
    <div style="display: inline-block; vertical-align: top;">
        <span style="font-size: 20px; font-weight: bold">LOW</span><img src="../static/info.png" style="margin-left: 100px; margin-top: 30px;">
    </div>
    <div>
        <svg id="linechart" width="500" height="400"></svg>
    </div>
    <div style="background-color: #E7E7E7; width: 500px; height: 1000px">

    </div>

    <script>
        let paindata =     JSON.parse('{{ paindata | tojson | safe }}')
        let activitydata = JSON.parse('{{ activitydata | tojson | safe }}')
        let stressdata =   JSON.parse('{{ stressdata | tojson | safe }}')
        let sleepdata =    JSON.parse('{{ sleepdata | tojson | safe }}')

        let svg = d3.select("#linechart"),
            margin = 200,
            width = svg.attr("width") - margin,
            height = svg.attr("height") - margin

        let xScale = d3.scaleLinear().domain([0, 19]).range([0, width]),
            yScale = d3.scaleLinear().domain([0, 10]).range([height, 0]);

        let g = svg.append("g")
                   .attr("transform", "translate(" + 100 + "," + 100 + ")");

        svg.append('text')
           .attr('x', width/2 + 100)
           .attr('y', 100)
           .attr('text-anchor', 'middle')
           .style('font-family', 'Arial')
           .style('font-size', 20)
           .text('Back pain');

        svg.append('text')
           .attr('x', width/2 + 100)
           .attr('y', height - 15 + 150)
           .attr('text-anchor', 'middle')
           .style('font-family', 'Arial')
           .style('font-size', 12)
           .text('Month');

        svg.append('text')
           .attr('text-anchor', 'middle')
           .attr('transform', 'translate(60,' + height + ')rotate(-90)')
           .style('font-family', 'Arial')
           .style('font-size', 12)
           .text('Back pain value');

        g.append("g")
         .attr("transform", "translate(0," + height + ")")
         .call(d3.axisBottom(xScale));

        g.append("g")
         .call(d3.axisLeft(yScale));

        svg.append('g')
           .selectAll("dot")
           .data(paindata["pain"])
           .enter()
           .append("circle")
           .attr("cx", function (d) { return xScale(d.id); } )
           .attr("cy", function (d) { return yScale(d.value); } )
           .attr("r", 3)
           .attr("transform", "translate(" + 100 + "," + 100 + ")")
           .style("fill", "#F57600");

        let line = d3.line()
                     .x(function(d) { return xScale(d.id); })
                     .y(function(d) { return yScale(d.value); })
                     .curve(d3.curveMonotoneX)

        svg.append("path")
           .datum(paindata["pain"])
           .attr("class", "line")
           .attr("transform", "translate(" + 100 + "," + 100 + ")")
           .attr("d", line)
           .style("fill", "none")
           .style("stroke", "#F57600")
           .style("stroke-width", "2");



    </script>
</body>
</html>